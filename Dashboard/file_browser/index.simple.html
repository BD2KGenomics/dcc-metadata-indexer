<html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7 ng-app:multiselect" lang="en" id="ng-app"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8 ng-app:multiselect" lang="en" id="ng-app"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang="en" ng-app="multiselect"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" ng-app="multiselect"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="ElasticSearch + Elastic.js Multi-Select Faceting Example">
    <meta name="viewport" content="width=device-width">

    <title>ElasticSearch + Elastic.js Multi-Select Faceting</title>

    <link rel="stylesheet" href="/common/css/normalize.min.css">
    <link rel="stylesheet" href="/common/css/main.min.css">
    <link rel="stylesheet" href="/common/css/bootstrap.min.css">
    <link rel="stylesheet" href="/common/css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="/common/css/elasticjs.css">

    <script src="/common/lib/modernizr-2.6.1.min.js"></script>
</body>
</head>

<body ng-controller="SearchCtrl">
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container-fluid">
                <span class="brand">Elastic.js Multi-Select Faceting</span>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row-fluid" style="margin-top:5%">
            <div class="span2 well">
                <ul class="nav nav-list">
                    <li class="nav-header">Center Name</li>
                    <li ng-repeat="center_name in results.facets.center_nameFacet.terms">
                        <label class="checkbox">
                            <input type="checkbox" ng-checked="hasFilter('center_name', center_name.term)" ng-click="handleFilter('center_name', center_name.term)">
                            {{center_name.term}}
                            <span class="muted">({{center_name.count}})</span>
                        </label>
                    </li>
                    <li class="divider"></li>
                    <li class="nav-header">Program</li>
                    <li ng-repeat="program in results.facets.programFacet.terms">
                        <label class="checkbox">
                            <input type="checkbox" ng-checked="hasFilter('program', program.term)" ng-click="handleFilter('program', program.term)">
                            {{program.term}}
                            <span class="muted">({{program.count}})</span>
                        </label>
                    </li>
                    <li class="divider"></li>
                    <li class="nav-header">Project</li>
                    <li ng-repeat="project in results.facets.projectFacet.terms">
                        <label class="checkbox">
                            <input type="checkbox" ng-checked="hasFilter('project', project.term)" ng-click="handleFilter('project', project.term)">
                            {{project.term}}
                            <span class="muted">({{project.count}})</span>
                        </label>
                    </li>
                    <li class="divider"></li>
                    <li class="nav-header">Workflow</li>
                    <li ng-repeat="kw in results.facets.workflowFacet.terms">
                        <label class="checkbox">
                            <input type="checkbox" ng-checked="hasFilter('workflow', kw.term)" ng-click="handleFilter('workflow', kw.term)">
                            {{kw.term}}
                            <span class="muted">({{kw.count}})</span>
                        </label>
                    </li>

                    <li class="divider"></li>
                    <li class="nav-header">Analysis Type</li>
                    <li ng-repeat="kw in results.facets.analysis_typeFacet.terms">
                        <label class="checkbox">
                            <input type="checkbox" ng-checked="hasFilter('analysis_type', kw.term)" ng-click="handleFilter('analysis_type', kw.term)">
                            {{kw.term}}
                            <span class="muted">({{kw.count}})</span>
                        </label>
                    </li>
                    <!-- ['center_name', 'program', 'project', 'workflow', 'analysis_type', 'specimen_type', 'file_type']; -->

                    <li class="divider"></li>
                    <li class="nav-header">Specimen Type</li>
                    <li ng-repeat="kw in results.facets.specimen_typeFacet.terms">
                        <label class="checkbox">
                            <input type="checkbox" ng-checked="hasFilter('specimen_type', kw.term)" ng-click="handleFilter('specimen_type', kw.term)">
                            {{kw.term}}
                            <span class="muted">({{kw.count}})</span>
                        </label>
                    </li>

                    <li class="divider"></li>
                    <li class="nav-header">File Type</li>
                    <li ng-repeat="kw in results.facets.file_typeFacet.terms">
                        <label class="checkbox">
                            <input type="checkbox" ng-checked="hasFilter('file_type', kw.term)" ng-click="handleFilter('file_type', kw.term)">
                            {{kw.term}}
                            <span class="muted">({{kw.count}})</span>
                        </label>
                    </li>

                </ul>
            </div>
            <div class="span5">
                <pre>{{restQry}}</pre>
            </div>
            <div class="span5">
                <ul class="unstyled">
                    <li class="well well-small" ng-repeat="hit in results.hits.hits">
                        <h4>{{hit._source.title}}</h4>
                        <span style="margin-right:1px;" class="badge badge-info" ng-repeat="tag in hit._source.databases">{{tag}}</span>
                        <span style="margin-right:1px;" class="badge badge-success" ng-repeat="kw in hit._source.consequences">{{kw}}</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- project dependencies -->
    <script src="/common/lib/underscore.min.js"></script>
    <script src="/common/lib/angular.min.js"></script>
    <script src="/common/js/elastic.min.js"></script>
    <script src="/common/js/elastic-angular-client.min.js"></script>

    <!-- project specific files -->
    <script src="js/app.simple.js"></script>

</html>
